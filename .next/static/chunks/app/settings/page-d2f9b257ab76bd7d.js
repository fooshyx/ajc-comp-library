(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{134:(e,s,r)=>{Promise.resolve().then(r.bind(r,2608))},2608:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var a=r(5155),t=r(2115),d=r(2108),n=r(5695);function o(){let{data:e,status:s}=(0,d.useSession)(),[r,o]=(0,t.useState)(!1),[l,i]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[c,u]=(0,t.useState)(""),[m,x]=(0,t.useState)(!1);if("loading"===s)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."});e||(0,n.redirect)("/auth/signin");let g=async e=>{if(e.preventDefault(),l.newPassword!==l.confirmPassword)return void u("New passwords do not match");if(l.newPassword.length<6)return void u("New password must be at least 6 characters");x(!0),u("");try{let e=await fetch("/api/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:l.currentPassword,newPassword:l.newPassword})}),s=await e.json();e.ok?(u("Password changed successfully!"),i({currentPassword:"",newPassword:"",confirmPassword:""}),o(!1)):u(s.error||"Failed to change password")}catch(e){u("An error occurred while changing password")}finally{x(!1)}};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Settings"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your account preferences"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Account Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,a.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-md text-gray-900",children:e.user.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-md text-gray-900",children:e.user.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Account Type"}),(0,a.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-md",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.user.isAdmin?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.user.isAdmin?"Administrator":"User"})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Security"}),r?(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,a.jsx)("input",{type:"password",value:l.currentPassword,onChange:e=>i(s=>({...s,currentPassword:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,a.jsx)("input",{type:"password",value:l.newPassword,onChange:e=>i(s=>({...s,newPassword:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",value:l.confirmPassword,onChange:e=>i(s=>({...s,confirmPassword:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6})]}),c&&(0,a.jsx)("div",{className:"p-3 rounded-md text-sm ".concat(c.includes("successfully")?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"),children:c}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"submit",disabled:m,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium",children:m?"Changing...":"Change Password"}),(0,a.jsx)("button",{type:"button",onClick:()=>{o(!1),i({currentPassword:"",newPassword:"",confirmPassword:""}),u("")},className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md text-sm font-medium",children:"Cancel"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Keep your account secure by regularly updating your password."}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Change Password"})]})]})]})}},5695:(e,s,r)=>{"use strict";var a=r(8999);r.o(a,"redirect")&&r.d(s,{redirect:function(){return a.redirect}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}})}},e=>{e.O(0,[108,441,964,358],()=>e(e.s=134)),_N_E=e.O()}]);