(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1040:(e,t,s)=>{Promise.resolve().then(s.bind(s,9590))},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"redirect")&&s.d(t,{redirect:function(){return a.redirect}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},9590:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(5155),r=s(2115),l=s(2108),i=s(5695);let n=(e,t,s)=>new Promise((a,r)=>{let l=document.createElement("canvas"),i=l.getContext("2d"),n=new Image;n.onload=()=>{l.width=t,l.height=s,i?(i.clearRect(0,0,t,s),i.drawImage(n,0,0,t,s),a(l.toDataURL("image/png"))):r(Error("Could not get canvas context"))},n.onerror=()=>{r(Error("Failed to load image"))},n.src=URL.createObjectURL(e)}),c=e=>!!["image/jpeg","image/png","image/gif","image/webp","image/avif"].includes(e.type)&&!(e.size>5242880);function d(e){let{units:t,traits:s,onAddUnit:l,onEditUnit:i,onDeleteUnit:d}=e,[o,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null),[h,g]=(0,r.useState)({name:"",cost:1,image:"",traits:[]}),[p,b]=(0,r.useState)(null),[f,y]=(0,r.useState)(null),[j,v]=(0,r.useState)([1,2,3,4,5]),[N,w]=(0,r.useState)("asc"),C=()=>{g({name:"",cost:1,image:"",traits:[]}),b(null),y(null),m(!1),u(null)},k=t.filter(e=>j.includes(e.cost)).sort((e,t)=>"asc"===N?e.name.localeCompare(t.name):t.name.localeCompare(e.name)),S=async e=>{e.preventDefault();let t={...h};if(p)try{t.image=await n(p,128,128)}catch(e){alert("Error processing image. Please try again.");return}x?i({...x,...t}):l(t),C()};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Units Management"}),(0,a.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Add Unit"})]}),o&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:x?"Edit Unit":"Add New Unit"}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",value:h.name,onChange:e=>g(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost"}),(0,a.jsx)("input",{type:"number",min:"1",max:"5",value:h.cost,onChange:e=>g(t=>({...t,cost:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image (128x128px)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){if(!c(s))return void alert("Please select a valid image file (JPEG, PNG, GIF, WebP, AVIF) under 5MB.");b(s);let e=new FileReader;e.onload=e=>{var t;y(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(s)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),f&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:f,alt:"Preview",className:"w-16 h-16 object-cover border border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Preview (will be resized to 128x128px)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Traits/Classes"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:s.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.traits.includes(e.name),onChange:()=>{var t;return t=e.name,void g(e=>({...e,traits:e.traits.includes(t)?e.traits.filter(e=>e!==t):[...e.traits,t]}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:x?"Update Unit":"Add Unit"}),(0,a.jsx)("button",{type:"button",onClick:C,className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md text-sm font-medium",children:"Cancel"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Existing Units"}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("button",{onClick:()=>w("asc"===N?"desc":"asc"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Sort ","asc"===N?"↓":"↑"," A-Z"]})})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Cost:"}),(0,a.jsx)("div",{className:"flex space-x-4",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:j.includes(e),onChange:()=>{v(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[e," cost"]})]},e))})]})]}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:0===t.length?(0,a.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:"No units created yet. Add your first unit above."}):0===k.length?(0,a.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:"No units match the selected filters."}):k.map(e=>(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.name,className:"w-16 h-16 object-cover border border-gray-300 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Cost: ",e.cost," | Traits: ",e.traits.join(", ")||"None"]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{u(e),g({name:e.name,cost:e.cost,image:e.image,traits:e.traits}),y(e.image||null),m(!0)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>d(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]},e.id))})]})]})}let o=e=>{let t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)},m={bronze:{hex:"#CD7F32",name:"Bronze"},"light-bronze":{hex:"#E6B85C",name:"Light Bronze"},silver:{hex:"#C0C0C0",name:"Silver"},gold:{hex:"#FFD700",name:"Gold"},platinum:{hex:"#E5E4E2",name:"Platinum"}},x=e=>m[e].name;function u(e){let{traits:t,onAddTrait:s,onEditTrait:l,onDeleteTrait:i}=e,[n,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,g]=(0,r.useState)({name:"",image:"",breakpoints:[]}),[p,b]=(0,r.useState)(null),[f,y]=(0,r.useState)(null),[j,v]=(0,r.useState)("asc"),N=()=>{g({name:"",image:"",breakpoints:[]}),b(null),y(null),c(!1),u(null)},w=t.sort((e,t)=>"asc"===j?e.name.localeCompare(t.name):t.name.localeCompare(e.name)),C=async e=>{e.preventDefault();let t={...h};if(p)try{t.image=await new Promise((e,t)=>{let s=new FileReader;s.onload=s=>{var a;let r=null==(a=s.target)?void 0:a.result;if(!r.includes("<svg")||!r.includes("</svg>"))return void t(Error("Invalid SVG file"));e(((e,t,s)=>{let a=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("svg");if(!a)throw Error("Invalid SVG structure");let r=a.getAttribute("viewBox");if(!r){let e=a.getAttribute("width")||"64",l=a.getAttribute("height")||"64",i=parseFloat(e.toString().replace(/[^\d.]/g,""))||t,n=parseFloat(l.toString().replace(/[^\d.]/g,""))||s;r="0 0 ".concat(i," ").concat(n)}return a.setAttribute("width",t.toString()),a.setAttribute("height",s.toString()),a.setAttribute("viewBox",r),a.querySelectorAll("script").forEach(e=>e.remove()),a.querySelectorAll("*").forEach(e=>{e.getAttribute("fill")||e.getAttribute("stroke")||e.setAttribute("fill","black");let t=e.getAttribute("fill");("currentColor"===t||"inherit"===t)&&e.setAttribute("fill","black");let s=e.getAttribute("stroke");("currentColor"===s||"inherit"===s)&&e.setAttribute("stroke","black")}),a.getAttribute("fill")||a.setAttribute("fill","black"),new XMLSerializer().serializeToString(a)})(r,64,64))},s.onerror=()=>{t(Error("Failed to read SVG file"))},s.readAsText(p)})}catch(e){alert("Error processing SVG. Please try again.");return}d?l({...d,...t}):s(t),N()},k=(e,t,s)=>{g(a=>({...a,breakpoints:a.breakpoints.map((a,r)=>r===e?{...a,[t]:s}:a)}))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Traits/Classes Management"}),(0,a.jsx)("button",{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Add Trait"})]}),n&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:d?"Edit Trait":"Add New Trait"}),(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",value:h.name,onChange:e=>g(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SVG Image (64x64px)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:".svg,image/svg+xml",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){if(!(["image/svg+xml"].includes(s.type)&&!(s.size>1048576)&&1))return void alert("Please select a valid SVG file under 1MB.");b(s);let e=new FileReader;e.onload=e=>{var t;y(o(null==(t=e.target)?void 0:t.result))},e.readAsText(s)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),f&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-16 h-16 border border-gray-300 rounded flex items-center justify-center overflow-hidden",children:(0,a.jsx)("img",{src:f,alt:"Preview",className:"max-w-full max-h-full object-contain"})}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"SVG Preview (64x64px)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Breakpoints"}),(0,a.jsx)("button",{type:"button",onClick:()=>{g(e=>({...e,breakpoints:[...e.breakpoints,{num:1,color:"bronze"}]}))},className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm",children:"Add Breakpoint"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[h.breakpoints.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Number"}),(0,a.jsx)("input",{type:"number",min:"1",value:e.num,onChange:e=>k(t,"num",parseInt(e.target.value)),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Color"}),(0,a.jsx)("select",{value:e.color,onChange:e=>k(t,"color",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:Object.keys(m).map(e=>(0,a.jsx)("option",{value:e,children:x(e)},e))})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{g(e=>({...e,breakpoints:e.breakpoints.filter((e,s)=>s!==t)}))},className:"mt-5 bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm",children:"Remove"})]},t)),0===h.breakpoints.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No breakpoints added yet."})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:d?"Update Trait":"Add Trait"}),(0,a.jsx)("button",{type:"button",onClick:N,className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md text-sm font-medium",children:"Cancel"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Existing Traits"}),(0,a.jsxs)("button",{onClick:()=>v("asc"===j?"desc":"asc"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Sort ","asc"===j?"↓":"↑"," A-Z"]})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:0===t.length?(0,a.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:"No traits created yet. Add your first trait above."}):w.map(e=>(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[e.image&&(0,a.jsx)("div",{className:"w-12 h-12 border border-gray-300 rounded flex items-center justify-center overflow-hidden",style:{maxWidth:"48px",maxHeight:"48px"},children:(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",dangerouslySetInnerHTML:{__html:e.image},style:{fontSize:"0",lineHeight:"0"}})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{u(e),g({name:e.name,image:e.image,breakpoints:[...e.breakpoints]}),e.image?y(o(e.image)):y(null),c(!0)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>i(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.breakpoints.map((e,t)=>{let s=m[e.color].hex;return(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-2 py-1 rounded text-sm border",style:{backgroundColor:s+"20",borderColor:s},children:[(0,a.jsx)("span",{className:"font-medium",children:e.num}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:s}}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:x(e.color)})]},t)}),0===e.breakpoints.length&&(0,a.jsx)("span",{className:"text-sm text-gray-500 italic",children:"No breakpoints"})]})]},e.id))})]})]})}function h(e){let{components:t,onAddComponent:s,onEditComponent:l,onDeleteComponent:i}=e,[d,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[u,h]=(0,r.useState)({name:"",image:""}),[g,p]=(0,r.useState)(null),[b,f]=(0,r.useState)(null),[y,j]=(0,r.useState)("asc"),v=()=>{h({name:"",image:""}),p(null),f(null),o(!1),x(null)},N=t.sort((e,t)=>"asc"===y?e.name.localeCompare(t.name):t.name.localeCompare(e.name)),w=async e=>{e.preventDefault();let t={...u};if(g)try{t.image=await n(g,32,32)}catch(e){alert("Error processing image. Please try again.");return}m?l({...m,...t}):s(t),v()};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Components Management"}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Add Component"})]}),d&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:m?"Edit Component":"Add New Component"}),(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",value:u.name,onChange:e=>h(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image (32x32px)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){if(!c(s))return void alert("Please select a valid image file (JPEG, PNG, GIF, WebP, AVIF) under 5MB.");p(s);let e=new FileReader;e.onload=e=>{var t;f(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(s)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),b&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:b,alt:"Preview",className:"w-16 h-16 object-cover border border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Preview (32x32px actual size)"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:m?"Update Component":"Add Component"}),(0,a.jsx)("button",{type:"button",onClick:v,className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md text-sm font-medium",children:"Cancel"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Existing Components"}),(0,a.jsxs)("button",{onClick:()=>j("asc"===y?"desc":"asc"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Sort ","asc"===y?"↓":"↑"," A-Z"]})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:0===t.length?(0,a.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:"No components created yet. Add your first component above."}):N.map(e=>(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.name,className:"w-8 h-8 object-cover border border-gray-300 rounded"}),(0,a.jsx)("div",{children:(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name})})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{x(e),h({name:e.name,image:e.image}),f(e.image||null),o(!0)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>i(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]},e.id))})]})]})}let g=["standard","emblem","artifact","other"];function p(e){let{items:t,components:s,onAddItem:l,onEditItem:i,onDeleteItem:d}=e,[o,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null),[h,p]=(0,r.useState)({name:"",type:"standard",image:"",recipe:null}),[b,f]=(0,r.useState)(null),[y,j]=(0,r.useState)(null),[v,N]=(0,r.useState)([]),[w,C]=(0,r.useState)("asc"),[k,S]=(0,r.useState)(["standard","emblem","artifact","other"]),E=()=>{p({name:"",type:"standard",image:"",recipe:null}),f(null),j(null),N([]),m(!1),u(null)},A=t.filter(e=>k.includes(e.type)).sort((e,t)=>"asc"===w?e.name.localeCompare(t.name):t.name.localeCompare(e.name)),U=async e=>{e.preventDefault();let t={...h};if(b)try{t.image=await n(b,64,64)}catch(e){alert("Error processing image. Please try again.");return}v.length>0?t.recipe=v:t.recipe=null,x?i({...x,...t}):l(t),E()},T=e=>{N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},P=e=>{let t=s.find(t=>t.id===e);return(null==t?void 0:t.name)||"Unknown Component"},F=e=>{switch(e){case"standard":default:return"bg-gray-100 text-gray-800";case"emblem":return"bg-purple-100 text-purple-800";case"artifact":return"bg-blue-100 text-blue-800";case"other":return"bg-green-100 text-green-800"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Items Management"}),(0,a.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Add Item"})]}),o&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:x?"Edit Item":"Add New Item"}),(0,a.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",value:h.name,onChange:e=>p(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,a.jsx)("select",{value:h.type,onChange:e=>p(t=>({...t,type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image (64x64px)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){if(!c(s))return void alert("Please select a valid image file (JPEG, PNG, GIF, WebP, AVIF) under 5MB.");f(s);let e=new FileReader;e.onload=e=>{var t;j(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(s)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),y&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:y,alt:"Preview",className:"w-16 h-16 object-cover border border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Preview (will be resized to 64x64px)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipe Components (optional)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[0===s.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No components available. Create components first."}):(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-200 rounded p-2",children:s.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:v.includes(e.id),onChange:()=>T(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"truncate",children:e.name})]},e.id))}),v.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Selected components:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:v.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[P(e),(0,a.jsx)("button",{type:"button",onClick:()=>T(e),className:"ml-1 text-blue-600 hover:text-blue-800",children:"\xd7"})]},e))})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select the components needed to craft this item"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:x?"Update Item":"Add Item"}),(0,a.jsx)("button",{type:"button",onClick:E,className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md text-sm font-medium",children:"Cancel"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Existing Items"}),(0,a.jsxs)("button",{onClick:()=>C("asc"===w?"desc":"asc"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Sort ","asc"===w?"↓":"↑"," A-Z"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Type"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:g.map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:k.includes(e),onChange:t=>{t.target.checked?S(t=>[...t,e]):S(t=>t.filter(t=>t!==e))},className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(F(e)),children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Showing ",A.length," of ",t.length," items"]})]})]}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:0===t.length?(0,a.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:"No items created yet. Add your first item above."}):0===A.length?(0,a.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:"No items match the selected type filters."}):A.map(e=>(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-cover border border-gray-300 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(F(e.type)),children:e.type})]}),e.recipe&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Recipe: ",e.recipe.map(e=>P(e)).join(" + ")]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{u(e),p({name:e.name,type:e.type,image:e.image,recipe:e.recipe}),N(e.recipe||[]),j(e.image||null),m(!0)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>d(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]},e.id))})]})]})}function b(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[o,m]=(0,r.useState)({username:"",email:"",password:"",isAdmin:!1}),[x,u]=(0,r.useState)("asc");(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/users");if(e.ok){let s=await e.json();t(s)}}catch(e){console.error("Error fetching users:",e)}finally{l(!1)}},g=e.sort((e,t)=>"asc"===x?e.username.localeCompare(t.username):t.username.localeCompare(e.username)),p=async e=>{e.preventDefault();try{let e=c?"PUT":"POST",t=c?{...o,id:c.id}:o,s=await fetch("/api/users",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)await h(),f(),alert(c?"User updated successfully!":"User created successfully!");else{let e=await s.json();alert("Error: ".concat(e.error))}}catch(e){console.error("Error saving user:",e),alert("Failed to save user")}},b=async e=>{if(confirm("Are you sure you want to delete this user?"))try{let t=await fetch("/api/users?id=".concat(e),{method:"DELETE"});if(t.ok)await h(),alert("User deleted successfully!");else{let e=await t.json();alert("Error: ".concat(e.error))}}catch(e){console.error("Error deleting user:",e),alert("Failed to delete user")}},f=()=>{m({username:"",email:"",password:"",isAdmin:!1}),d(null),n(!1)};return s?(0,a.jsx)("div",{className:"p-4",children:"Loading users..."}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"User Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>u("asc"===x?"desc":"asc"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Sort ","asc"===x?"↓":"↑"," A-Z"]}),(0,a.jsx)("button",{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Add User"})]})]}),i&&(0,a.jsxs)("form",{onSubmit:p,className:"bg-gray-50 p-6 rounded-lg space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:c?"Edit User":"Add New User"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,a.jsx)("input",{type:"text",value:o.username,onChange:e=>m(t=>({...t,username:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",value:o.email,onChange:e=>m(t=>({...t,email:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",c&&"(leave blank to keep current)"]}),(0,a.jsx)("input",{type:"password",value:o.password,onChange:e=>m(t=>({...t,password:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!c,minLength:6})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.isAdmin,onChange:e=>m(t=>({...t,isAdmin:e.target.checked})),className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Admin User"})]})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:c?"Update User":"Create User"}),(0,a.jsx)("button",{type:"button",onClick:f,className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md text-sm font-medium",children:"Cancel"})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.username}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isAdmin?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.isAdmin?"Admin":"User"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{d(e),m({username:e.username,email:e.email,password:"",isAdmin:e.isAdmin}),n(!0)},className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]}),0===e.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No users found. Create your first user above."})]})]})}var f=s(5953);function y(){let[e,t]=(0,r.useState)({units:{valid:!1},traits:{valid:!1},components:{valid:!1},items:{valid:!1}}),[s,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1),c=()=>{t(f.W.getCacheStatus())};(0,r.useEffect)(()=>{c()},[]);let d=async()=>{l(!0);try{await f.W.refreshCache(),c(),alert("Cache refreshed successfully! Users will now see the latest data.")}catch(e){console.error("Error refreshing cache:",e),alert("Failed to refresh cache")}finally{l(!1)}};return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Cache Management"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage the performance cache that stores game data (traits, units, components, items) locally for users. When you update game data, refresh the cache to ensure users see the latest information."}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Cache Status"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(e).map(e=>{var t;let[s,r]=e;return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 capitalize",children:s}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(r.valid?"text-green-600":"text-red-600"),children:r.valid?"Valid":"Invalid/Expired"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("div",{children:"Last Updated:"}),(0,a.jsx)("div",{className:"font-mono text-xs",children:(t=r.lastUpdated)?new Date(t).toLocaleString():"Never"})]})]},s)})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Actions"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{onClick:d,disabled:s,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium",children:s?"Refreshing...":"Refresh Cache"}),(0,a.jsx)("button",{onClick:c,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Check Status"}),(0,a.jsx)("button",{onClick:()=>{n(!0);try{f.W.clearCache(),c(),alert("Cache cleared successfully! Users will fetch fresh data on their next visit.")}catch(e){console.error("Error clearing cache:",e),alert("Failed to clear cache")}finally{n(!1)}},disabled:i,className:"bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium",children:i?"Clearing...":"Clear Cache"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Action Guide"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800 space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Refresh Cache:"})," Fetches the latest data from the database and updates the cache. Use this after making changes to game data to ensure users see updates immediately."]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Check Status:"})," Updates the cache status display to show current cache validity."]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Clear Cache:"})," Completely removes all cached data. Users will fetch fresh data on their next visit. Use this for troubleshooting or major data changes."]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Performance Benefits"}),(0,a.jsxs)("div",{className:"text-sm text-green-800 space-y-1",children:[(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Fast Filtering:"})," Unit cost filters work instantly with cached data"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Quick Search:"})," Searching through units/traits/items is near-instant"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Reduced Server Load:"})," Less database queries for game data"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Better UX:"})," Composition builder loads faster and feels more responsive"]}),(0,a.jsxs)("div",{children:["• ",(0,a.jsx)("strong",{children:"Offline Capable:"})," Cached data works even when offline"]})]})]})]})]})})}function j(){var e;let{data:t,status:s}=(0,l.useSession)(),[n,c]=(0,r.useState)("traits"),[o,m]=(0,r.useState)([]),[x,g]=(0,r.useState)([]),[f,j]=(0,r.useState)([]),[v,N]=(0,r.useState)([]),w=async()=>{try{let[e,t,s,a]=await Promise.all([fetch("/api/units"),fetch("/api/traits"),fetch("/api/components"),fetch("/api/items")]);e.ok&&m(await e.json()),t.ok&&g(await t.json()),s.ok&&j(await s.json()),a.ok&&N(await a.json())}catch(e){console.error("Failed to fetch data:",e)}};if((0,r.useEffect)(()=>{w()},[]),"loading"===s)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."});if(t||(0,i.redirect)("/auth/signin"),!(null==(e=t.user)?void 0:e.isAdmin))return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You need administrator privileges to access this page."}),(0,a.jsxs)("div",{className:"space-x-4",children:[(0,a.jsx)("a",{href:"/",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md text-sm font-medium",children:"Go Home"}),(0,a.jsx)("a",{href:"/builder",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-md text-sm font-medium",children:"Composition Builder"})]})]})});let C=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),k=async e=>{try{let t={...e,id:C()},s=await fetch("/api/traits",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok){let e=await s.json();g(t=>[...t,e])}else console.error("Failed to create trait")}catch(e){console.error("Error creating trait:",e)}},S=async e=>{try{let t=await fetch("/api/traits",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();g(t=>t.map(t=>t.id===e.id?e:t))}else console.error("Failed to update trait")}catch(e){console.error("Error updating trait:",e)}},E=async e=>{try{(await fetch("/api/traits?id=".concat(e),{method:"DELETE"})).ok?g(t=>t.filter(t=>t.id!==e)):console.error("Failed to delete trait")}catch(e){console.error("Error deleting trait:",e)}},A=async e=>{try{let t={...e,id:C()},s=await fetch("/api/units",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok){let e=await s.json();m(t=>[...t,e])}else console.error("Failed to create unit")}catch(e){console.error("Error creating unit:",e)}},U=async e=>{try{let t=await fetch("/api/units",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();m(t=>t.map(t=>t.id===e.id?e:t))}else console.error("Failed to update unit")}catch(e){console.error("Error updating unit:",e)}},T=async e=>{try{(await fetch("/api/units?id=".concat(e),{method:"DELETE"})).ok?m(t=>t.filter(t=>t.id!==e)):console.error("Failed to delete unit")}catch(e){console.error("Error deleting unit:",e)}},P=async e=>{try{let t={...e,id:C()},s=await fetch("/api/components",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok){let e=await s.json();j(t=>[...t,e])}else console.error("Failed to create component")}catch(e){console.error("Error creating component:",e)}},F=async e=>{try{let t=await fetch("/api/components",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();j(t=>t.map(t=>t.id===e.id?e:t))}else console.error("Failed to update component")}catch(e){console.error("Error updating component:",e)}},D=async e=>{try{(await fetch("/api/components?id=".concat(e),{method:"DELETE"})).ok?j(t=>t.filter(t=>t.id!==e)):console.error("Failed to delete component")}catch(e){console.error("Error deleting component:",e)}},I=async e=>{try{let t={...e,id:C()},s=await fetch("/api/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok){let e=await s.json();N(t=>[...t,e])}else console.error("Failed to create item")}catch(e){console.error("Error creating item:",e)}},R=async e=>{try{let t=await fetch("/api/items",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();N(t=>t.map(t=>t.id===e.id?e:t))}else console.error("Failed to update item")}catch(e){console.error("Error updating item:",e)}},L=async e=>{try{(await fetch("/api/items?id=".concat(e),{method:"DELETE"})).ok?N(t=>t.filter(t=>t.id!==e)):console.error("Failed to delete item")}catch(e){console.error("Error deleting item:",e)}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage TFT components: traits, units, components, items, and users"})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("nav",{className:"flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>c("traits"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("traits"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Traits/Classes"}),(0,a.jsx)("button",{onClick:()=>c("units"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("units"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Units"}),(0,a.jsx)("button",{onClick:()=>c("components"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("components"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Components"}),(0,a.jsx)("button",{onClick:()=>c("items"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("items"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Items"}),(0,a.jsx)("button",{onClick:()=>c("users"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("users"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Users"}),(0,a.jsx)("button",{onClick:()=>c("cache"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("cache"===n?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Cache"})]})}),(0,a.jsxs)("div",{children:["traits"===n&&(0,a.jsx)(u,{traits:x,onAddTrait:k,onEditTrait:S,onDeleteTrait:E}),"units"===n&&(0,a.jsx)(d,{units:o,traits:x,onAddUnit:A,onEditUnit:U,onDeleteUnit:T}),"components"===n&&(0,a.jsx)(h,{components:f,onAddComponent:P,onEditComponent:F,onDeleteComponent:D}),"items"===n&&(0,a.jsx)(p,{items:v,components:f,onAddItem:I,onEditItem:R,onDeleteItem:L}),"users"===n&&(0,a.jsx)(b,{}),"cache"===n&&(0,a.jsx)(y,{})]})]})}}},e=>{e.O(0,[108,953,441,964,358],()=>e(e.s=1040)),_N_E=e.O()}]);